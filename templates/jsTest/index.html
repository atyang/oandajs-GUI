{% extends "api_base.html" %}

{% block account %}
   <form id="createAccountForm" onSubmit="createAccount(this);return false;">
        <input type="text" id="currencyInput" class="span3 oa-full-width" name="currency" placeholder="Currency">
        <input type="submit" id="createAccountBtn" class="span9 btn oa-full-width" value="Create and Use Account" />
    </form>
    <form id="useAccount" action="useAccount" method="POST">        
        {% csrf_token %}                
        <input type="hidden" id="accountId" name="account_id" value="{{ account_id }}">
    </form>
    <table id="accountSummary" class="table table-striped table-condensed">
        <thead>
            <tr>
                <th id="accountName"></th>
                <th id="accountCurrency"></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Balance:</td>
                <td id="balance"></td>
            </tr>
            <tr>
                <td>Unrealized P&L:</td>
                <td id="unrealizedPl"></td>
            </tr>
            <tr>
                <td>Realized P&L:</td>
                <td id="realizedPl"></td>
            </tr>
            <tr>
                <td>Open Trades:</td>
                <td id="openTrades"></td>
            </tr>
            <tr>
                <td>Open Orders:</td>
                <td id="openOrders"></td>
            </tr>
            <tr>
                <td>Margin Used:</td>
                <td id="marginUsed"></td>
            </tr>
            <tr>
                <td>Margin Available:</td>
                <td id="marginAvail"></td>
            </tr>
            <tr>
                <td>Margin Rate:</td>
                <td id="marginRate"></td>
            </tr>
            <tr>
                <td>Account Number:</td>
                <td id="accountId"></td>
            </tr>
        </tbody>
    </table>
{% endblock %}

{% block trades %}
    <div id="txListContainer">
        <div id="listType" class="btn-group oa-full-width">
            <div class="btn active">Trades</div>
            <div class="btn">Orders</div>
        </div>
        <div id="txList">
            <input type="hidden" name="listType" value="trades">
            <div id="tradeTemplate" class="openTrade">
                <div>
                    <div>
                        <span class="instrument"></span>
                        <span class="units"></span> units
                        <span class="oa-close-btn">
                            <span class="profit"></span>
                            <i class="icon-remove"></i>
                        </span>
                    </div>
                    <div>
                        <span class="side"></span> @
                        <span class="price"></span>
                        TP: <span class="takeProfit"></span>
                        SL: <span class="stopLoss"></span>
                        TS: <span class="trailingStop"></span>
                    </div>
                </div>
            </div>                
            <div id="orderTemplate" class="openTrade">
                <div>
                    <div>
                        <span class="instrument"></span>
                        <span class="units"></span> units
                        <span class="oa-close-btn">
                            <span class="distance"></span>
                            <i class="icon-remove"></i>
                        </span>
                    </div>
                    <div>
                        <span class="side"></span> <span class="type"></span> @
                        <span class="price"></span>
                        TP: <span class="takeProfit"></span>
                        SL: <span class="stopLoss"></span>
                        TS: <span class="trailingStop"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>  
{% endblock %}

{% block rates %}
    <div class="btn toggle">Select Pairs</div>
    <div id="ratesSelector" style="display:none;">
        <select id="pairsNotSelected" multiple="multiple">
        </select>
        <div class="rates-selector-btn-container">
            <input type="button" class="btn rates-selector-btn" value="Add &gt;" onclick="addPair()" />
            <input type="button" class="btn rates-selector-btn" value="Add All &gt;&gt;" onclick="addAllPairs()" />
            <input type="button" class="btn rates-selector-btn" value="&lt; Remove" onclick="removePair()" />
            <input type="button" class="btn rates-selector-btn" value="&lt;&lt; Remove All" onclick="removeAllPairs()" />
            <input type="submit" class="btn rates-selector-btn" value="Update" form="ratesForm" />
        </div>
        <form id="ratesForm" onSubmit="updateSelectedPairsList();return false;">
            <select id="pairsSelected" name="pairsSelected" multiple="multiple">
            </select>
        </form>
    </div>
    <div id="ratesListContainer">
        <div id="ratesList">
            <div id="rateTemplate" class="pair-rate">
                <div class="instrument"></div>
                <div class="prices">
                    <div class="ask"><div class="old-price"></div><small></small><bold></bold><sup></sup></div>
                    <div class="bid"><div class="old-price"></div><small></small><bold></bold><sup></sup></div>
                </div>
            </div>
        </div>                
    </div>
{% endblock %}

{%block createTrade %}
    <form id="tradeForm" onSubmit="tradeAction(this);return false;">
    
        <input type="hidden" id="txType" name="transaction_type" value="trade">
        <div id="transactionType" class="btn-group">
            <div class="btn txType btn-info active">Trade</div>
            <div class="btn txType">Order</div>
        </div>
    
        <select id="pairSelector" name="instrument"></select>

        <input type="hidden" name="side">
        <div class="btn-group" id="transactionSide">
            <div class="btn">Sell</div>
            <div class="btn">Buy</div>
        </div>
        
        <select id="typeSelector" name="type" class="orderParam">
            <option value="marketIfTouched">Market If Touched Order</option>
            <option value="limit">Limit Order</option>
            <option value="stop">Stop Order</option>
        </select>

        <div id="tradeFields">
            <div id="required">
                <input type="text" name="units" placeholder="Units">
                <input type="text" name="price" placeholder="Price" class="orderParam">
                <input type="text" name="expiry" placeholder="Expiry" class="orderParam">
            </div>
            
            <div id="optional">
                <input type="text" name="takeProfit" placeholder="Take Profit">
                <input type="text" name="stopLoss" placeholder="Stop Loss">
                <input type="text" name="trailingStop" placeholder="Trailing Stop">
                <input type="text" name="lowerBound" placeholder="Lower Bound" class="orderParam">
                <input type="text" name="upperBound" placeholder="Upper Bound" class="orderParam">
            </div>
        </div>
                
        <input type="submit" class="btn" value="Submit" />
    </form>
{% endblock %}

{% block candles %}
    <h1>Candles</h1>
    <p>Candlestick graph here.</p>
{% endblock %}
